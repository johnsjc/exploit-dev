#!/usr/bin/python
# exploit.py

from importlib import import_module

import argparse
import sys

def main(iteration, args):
	module = import_module('iterations.iteration{}'.format(iteration))	
	ex = getattr(module, 'execute')
	payload = ex(args) if args else ex()
	if payload:
		sys.stdout.write(payload)

if __name__ == '__main__':
	parser = argparse.ArgumentParser()
	parser.add_argument('iteration', type=int, help='the iteration of the exploit')
	parser.add_argument('--args', type=str, default='', help='iteration arguments')
	args = parser.parse_args()
	main(args.iteration, args.args)
